public static File getTempFileWithProgress(String path, String filename, DxApplication app, RecoverySystem.ProgressListener progressListener) { try { byte[] sha1b = app.getSha256(); File f = new File(app.getFilesDir(),path); if(!f.exists()) { return null; } String suffix = "."+filename.split("\\.")[filename.split("\\.").length-1]; File cacheDir = app.getCacheDir(); if(new File(cacheDir,filename).exists()) { return new File(cacheDir,filename); } cleanDir(Objects.requireNonNull(app.getExternalCacheDir())); cleanDir(Objects.requireNonNull(app.getCacheDir())); File tmp = File.createTempFile(filename.replace(suffix,""),suffix,cacheDir); }catch (Exception e) { e.printStackTrace(); progressListener.onProgress(100); } }